{"version":3,"sources":["../../src/auth-service.js"],"sourcesContent":["// Auth service - uses auth-sdk and api-client with decorators and async/await\nimport { init as initAuth, VERSION as authVersion } from '@xq9zk7823/auth-sdk';\nimport { init as initApi, VERSION as apiVersion } from '@xq9zk7823/api-client';\n\nfunction log(target, key, descriptor) {\n  const original = descriptor.value;\n  descriptor.value = function(...args) {\n    console.log('Calling ' + key + ' with', args);\n    return original.apply(this, args);\n  };\n  return descriptor;\n}\n\nfunction injectable(target) {\n  target._injectable = true;\n  return target;\n}\n\n@injectable\nclass AuthService {\n  constructor() {\n    this.auth = initAuth({ provider: 'oauth2' });\n    this.api = initApi({ baseUrl: 'https://api.internal.acmecorp.com' });\n    this.versions = { auth: authVersion, api: apiVersion };\n  }\n\n  @log\n  async login(username, password) {\n    await new Promise(resolve => setTimeout(resolve, 100));\n    return { token: 'fake-jwt-token', user: username };\n  }\n\n  @log\n  async fetchUserProfile(token) {\n    await new Promise(resolve => setTimeout(resolve, 50));\n    return { id: 1, name: 'Test User', token };\n  }\n\n  @log\n  async refreshToken(oldToken) {\n    const result = await this.login('refresh', oldToken);\n    return result.token;\n  }\n}\n\nexport { AuthService };\nexport default AuthService;\n"],"names":["AuthService","log","target","key","descriptor","original","value","args","console","apply","injectable","_injectable","auth","initAuth","provider","api","initApi","baseUrl","versions","authVersion","apiVersion","login","username","password","Promise","resolve","setTimeout","token","user","fetchUserProfile","id","name","refreshToken","oldToken","result"],"mappings":"AAAA,8EAA8E;;;;;;;;;;;;QA6CrEA;eAAAA;;QACT;eAAA;;;uBA7CyD;yBACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEvD,SAASC,IAAIC,MAAM,EAAEC,GAAG,EAAEC,UAAU;IAClC,IAAMC,WAAWD,WAAWE,KAAK;IACjCF,WAAWE,KAAK,GAAG;QAAS,IAAA,IAAA,OAAA,UAAA,QAAA,AAAGC,OAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;YAAGA,KAAH,QAAA,SAAA,CAAA,KAAO;;QACjCC,QAAQP,GAAG,CAAC,aAAaE,MAAM,SAASI;QACxC,OAAOF,SAASI,KAAK,CAAC,IAAI,EAAEF;IAC9B;IACA,OAAOH;AACT;AAEA,SAASM,WAAWR,MAAM;IACxBA,OAAOS,WAAW,GAAG;IACrB,OAAOT;AACT;AAEA,IAAA,AACMF,4BADN;;aACMA;gCAAAA;QAEF,IAAI,CAACY,IAAI,GAAGC,IAAAA,aAAQ,EAAC;YAAEC,UAAU;QAAS;QAC1C,IAAI,CAACC,GAAG,GAAGC,IAAAA,eAAO,EAAC;YAAEC,SAAS;QAAoC;QAClE,IAAI,CAACC,QAAQ,GAAG;YAAEN,MAAMO,gBAAW;YAAEJ,KAAKK,kBAAU;QAAC;;kBAJnDpB;;YAQEqB,KAAAA;mBADN,SACMA,MAAMC,QAAQ,EAAEC,QAAQ;;;;;gCAC5B;;oCAAM,IAAIC,QAAQC,SAAAA;+CAAWC,WAAWD,SAAS;;;;gCAAjD;gCACA;;oCAAO;wCAAEE,OAAO;wCAAkBC,MAAMN;oCAAS;;;;gBACnD;;;;YAGMO,KAAAA;mBADN,SACMA,iBAAiBF,KAAK;;;;;gCAC1B;;oCAAM,IAAIH,QAAQC,SAAAA;+CAAWC,WAAWD,SAAS;;;;gCAAjD;gCACA;;oCAAO;wCAAEK,IAAI;wCAAGC,MAAM;wCAAaJ,OAAAA;oCAAM;;;;gBAC3C;;;;YAGMK,KAAAA;mBADN,SACMA,aAAaC,QAAQ;;wBACnBC;;;;gCAAS;;oCAAM,IAAI,CAACb,KAAK,CAAC,WAAWY;;;gCAArCC,SAAS;gCACf;;oCAAOA,OAAOP,KAAK;;;;gBACrB;;;;WAvBI3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA2BN,WAAeA"}